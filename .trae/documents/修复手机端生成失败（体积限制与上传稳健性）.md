## 问题研判
- 电脑端成功、手机端失败，最可能的两类原因：
  1) 手机拍摄图片体积更大，`Base64` 超过服务端 `10mb` 解析上限，触发 413/500（`server/index.js:14` 现为 `express.json({ limit: '10mb' })`）。
  2) 临时图床上传不稳定或返回不可直链的 URL（临时服务偶发 405/限制）。
- 辅助可能性：移动端走 HTTPS，API 是 HTTP 导致混合内容被阻止；或前端指向 `127.0.0.1` 导致手机无法访问本机服务（日志仅打印 `127.0.0.1`，真实监听是 0.0.0.0，但前端地址需正确）。

## 改动方案
1. 提升与加固请求体限制
- 将 `express.json` 上限提高到 `25mb`，并补充 `express.urlencoded({ limit: '25mb', extended: true })`，缓解大图导致的解析失败。

2. 更稳健的上传链
- 为 `uploadToTempHost(base64Str)` 增加重试与备选图床：优先 `tmpfiles.org`，失败则自动切换到 `0x0.st`（无鉴权，返回直链），保证手机端大图也能拿到可访问公网 URL。
- 对返回 URL 做直链规范化（`tmpfiles` 拼接 `/dl/`；`0x0.st` 为响应文本）。

3. 更清晰的错误回传
- `/api/generate` 在上传失败时返回明确错误码与描述（例如 `{ error: 'upload_failed', detail: 'tmpfiles 405' }`），前端据此给出提示。

4. 前端兼容建议（无需大改）
- 在上传前统一将图片等比缩放至宽度 ≤ 1024，并 `toDataURL('image/jpeg', 0.85)`，大幅降低体积与失败率。
- 确保手机端 API Base URL 指向可访问地址（同局域网 `http://<PC_IP>:8787` 或通过隧道），避免 `127.0.0.1` 与混合内容问题。

## 代码级更新要点
- `server/index.js`
  - 上限：`app.use(express.json({ limit: '25mb' }))` 与 `app.use(express.urlencoded({ limit: '25mb', extended: true }))`。
  - `uploadToTempHost`：增加重试机制和备选 `0x0.st` 上传逻辑；返回直链 URL。
  - `/api/generate`：若 `data:` 输入，走上传并在失败时返回带错误码的 JSON；成功则进入现有队列流程。

## 验证流程
- 用手机拍摄原图（>10MB 典型场景）执行一次：应看到上传成功日志与即梦生成正常；进度与结果在手机端展示。
- 强行模拟上传失败（临时禁网/改域名）验证备选图床与错误提示。

确认后我将提交上述后端改动，并给出前端压缩的最小补丁片段以保证手机端稳定。